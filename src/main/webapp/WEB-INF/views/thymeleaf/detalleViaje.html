<!DOCTYPE HTML>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head th:replace="fragments/fragments :: head('UnRumbo - Detalle del Viaje')">
    <th:block th:fragment="extra">
        <!-- Estilos adicionales si son necesarios -->
    </th:block>
</head>

<body>
<nav th:replace="fragments/fragments :: navbar"></nav>

<main role="main" class="container" style="margin-top: 120px;">
    <div class="row justify-content-center">
        <div class="col-md-10">
            <div class="card shadow-sm mb-4">
                <div class="card-body">
                    <h1 class="h3 mb-4 text-center">Detalle del Viaje</h1>

                    <div th:if="${error}" class="alert alert-danger">
                        <h4 class="alert-heading">Error</h4>
                        <p th:text="${error}"></p>
                        <hr>
                        <a href="/inicio" class="btn btn-outline-primary">Volver al inicio</a>
                    </div>

                    <div th:if="${detalle}" th:object="${detalle}">
                        <div class="row">
                            <!-- Columna Principal -->
                            <div class="col-md-6">
                                <div class="card mb-3">
                                    <div class="card-header bg-primary text-white">
                                        <h5 class="mb-0">Ruta y Horario</h5>
                                    </div>
                                    <div class="card-body">
                                        <p><strong>Origen:</strong> <span th:text="*{origen.nombre}"></span></p>
                                        <p><strong>Destino:</strong> <span th:text="*{destino.nombre}"></span></p>
                                        <p><strong>Fecha y Hora de Salida:</strong>
                                            <span th:text="${#temporals.format(detalle.fechaHoraDeSalida, 'dd/MM/yyyy HH:mm')}"></span> hs.
                                        </p>
                                    </div>
                                </div>

                                <div class="card mb-3">
                                    <div class="card-header bg-primary text-white">
                                        <h5 class="mb-0">Vehículo</h5>
                                    </div>
                                    <div class="card-body">
                                        <p><strong>Vehículo:</strong> <span th:text="*{vehiculo.marca} + ' ' + *{vehiculo.modelo}"></span></p>
                                        <p><strong>Patente:</strong> <span th:text="*{vehiculo.patente}"></span></p>
                                        <p><strong>Asientos Disponibles:</strong> <span th:text="*{asientosDisponibles}"></span></p>
                                    </div>
                                </div>
                            </div>

                            <!-- Columna Secundaria -->
                            <div class="col-md-6">
                                <div class="card mb-3">
                                    <div class="card-header bg-primary text-white">
                                        <h5 class="mb-0">Paradas Intermedias</h5>
                                    </div>
                                    <div class="card-body">
                                        <div th:if="*{#lists.isEmpty(paradas)}" class="text-muted">
                                            <p class="mb-0">Este viaje no tiene paradas intermedias.</p>
                                        </div>
                                        <ul th:unless="*{#lists.isEmpty(paradas)}" class="list-unstyled">
                                            <li th:each="parada : *{paradas}" th:text="${parada.ciudadDTO.nombre}"></li>
                                        </ul>
                                    </div>
                                </div>

                                <div class="card">
                                    <div class="card-header bg-primary text-white">
                                        <h5 class="mb-0">Viajeros Confirmados</h5>
                                    </div>
                                    <div class="card-body">
                                        <div th:if="*{#lists.isEmpty(viajeros)}" class="text-muted">
                                            <p class="mb-0">Aún no hay viajeros confirmados.</p>
                                        </div>
                                        <ul th:unless="*{#lists.isEmpty(viajeros)}" class="list-unstyled">
                                            <li th:each="viajero : *{viajeros}" th:text="${viajero.nombre} + ' (' + ${viajero.email} + ')'"></li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="mt-4 text-center">
                            <a th:href="@{/inicio}" class="btn btn-secondary me-2">
                                <i class="fas fa-arrow-left me-1"></i> Volver
                            </a>
                            <!-- Aquí podrías agregar más acciones como "Reservar" si es necesario -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</main>

<!-- Bootstrap JS y dependencias -->
<script th:src="@{/webjars/bootstrap/5.2.0/js/bootstrap.bundle.min.js}"></script>
<!-- Font Awesome para iconos -->
<script src="https://kit.fontawesome.com/your-code.js" crossorigin="anonymous"></script>

</body>
</html>